<view class="container">
  <view class="info" wx:for="{{warehouseList}}">
    
    <!-- 展开状态 -->
    <view wx:if="{{item.onHide == 0}}">
      <view class="row-box">
        <view class="col-box">
        
          <view class="title">
            {{item.repo_name}}
          </view>
          <view class="text">
            编号：{{item.repo_code}}
          </view>
          <view class="text">
            最大容量：{{item.storage_max}}
          </view>
        </view>
        <view class="col-box">
        
          <button bindtap="inWarehouse" data-index="{{index}}" data-code="{{item.repo_code}}" data-title="{{item.repo_name}}" data-showCode="{{item.repo_code}}" size="mini" type="primary" plain="true" class="button">入库</button>
        </view>
      </view>
      
      <!-- 已弃用 -->
      <!-- <view class="info-box" wx:for="{{item.material}}" >
        <view class="text">
          {{item.material_name}}
        </view>
        <view class="text">
          {{item.material_spec}}
        </view>
        <view class="text">
          {{item.material_num}}
        </view>
      </view> -->
      <view class="info-box" wx:for="{{item.pallet}}" >
        <view class="devide-line"></view>
        <view class="text">
          卡板编号：{{item.pallet_code}}
        </view>
        <view class="text">
          物料编号：{{item.material_code}}
        </view>
        <view class="text">
          物料名称：{{item.material_name}}
        </view>
        <view class="text">
          物料规格：{{item.material_spec}}
        </view>
        <view class="text">
          物料数量：{{item.material_num}}
        </view>
      </view>
      
      <view class="show" bindtap="foldWarehouse" data-index="{{index}}">
        收起
      </view>
    </view>
    
    <!-- 折叠状态 -->
    <view wx:if="{{item.onHide==1}}" bindtap="unfoldWarehouse" data-index="{{index}}" class="row-box">
      <view class="col-box">
        <view class="title">
          {{item.repo_name}}
        </view>
        <view class="text">
          编号：{{item.repo_code}}
        </view>
      </view>
      <view class="col-box">
        <view class="text">
          状态：{{item.repo_status}}
        </view>
        <view class="text">
          库存：{{item.storage_num}}
        </view>
      </view>
      <!-- <view class="show" bindtap="unfold" data-index="{{index}}">
        展开全部
      </view> -->
    </view>
  </view>

  <view class="info" wx:for="{{palletsList}}">
    <!-- 折叠状态 -->
    <view wx:if="{{item.onHide==1}}" bindtap="unfoldPallets" data-index="{{index}}" class="row-box">
      <view class="col-box">
        <view class="title">
          {{item.pallet_name}}
        </view>
        <view class="text">
          编号：{{item.pallet_code}}
        </view>
      </view>
      <view class="col-box">
        <view class="text">
          状态：{{item.pallet_status}}
        </view>
        <view class="text">
          库存：{{item.storage_num}}
        </view>
      </view>
    </view>


    <!-- 展开状态 -->
    <view wx:if="{{item.onHide == 0}}">
      
      <view class="row-box">
        <view class="col-box">
        
          <view class="title">
            {{item.pallet_name}}
          </view>
          <view class="text">
            编号：{{item.pallet_code}}
          </view>
          <view class="text">
            最大容量：{{item.storage_max}}
          </view>
        </view>
        <view class="col-box">
        
          <button bindtap="inPallets" data-index="{{index}}" size="mini" data-code="{{item.pallet_code}}" data-title="{{item.pallet_name}}" data-showCode="{{item.pallet_code}}"  type="primary" plain="true" class="button">入库</button>
        </view>
      </view>

      <view class="devide-line"></view>

      <view class="text">
        当前位置：{{item.pallet_code}}
      </view>
      <view class="devide-line"></view>
      <view class="info-box" wx:for="{{item.material}}">
        <view class="text">
          物料编号：{{item.material_code}}
        </view>
        <view class="text">
          物料名称：{{item.material_name}}
        </view>
        <view class="text">
          物料规格：{{item.material_spec}}
        </view>
        <view class="text">
          物料数量：{{item.material_num}}
        </view>
      </view>

      <view class="show" bindtap="foldPallets" data-index="{{index}}">
        收起
      </view>
    </view>

  </view>

  <!-- 设备扫码卡板后弹出的modal框 -->
  <modal show="{{showWarehouseModal}}" height="70%" bind:cancel="modalCancel" bind:confirm="postWarehouse"  title="{{title}}" index="{{warehouseListIndex}}" showCode="{{showCode}}">
    <scroll-view scroll-y="true" style="height: 75%">
      <view class="main-content">
        <view class="modal-box">
          卡板名称：{{modalWarehouseData.pallet_name}}
        </view>
        <view class="modal-box">
          卡板编号：{{modalWarehouseData.material_code}}
        </view>
        <view class="modal-box">
          物料编号：{{modalWarehouseData.material_code}}
        </view>
        <view class="modal-box">
          物料名称：{{modalWarehouseData.material_name}}
        </view>
        <view class="modal-box">
          物料规格：{{modalWarehouseData.material_spec}}
        </view>
        <view class="modal-box">
          物料数量：{{modalWarehouseData.material_num}}
        </view>
      </view>
    </scroll-view>
  </modal>

  <!-- 卡板扫描物料后弹出的modal框 -->
  <modal show="{{showPalletsModal}}" height="70%" bind:cancel="modalCancel" bind:confirm="postPallets" title="{{title}}" index="{{palletsListIndex}}" showCode="{{showCode}}">
    <scroll-view scroll-y="true" style="height: 75%">
      <view class="main-content">
        <view class="modal-box">
          卡板名称：{{modalPalletsData.pallet_name}}
        </view>
        <view class="modal-box">
          卡板编号：{{modalPalletsData.pallet_code}}
        </view>
        <view class="modal-box">
          物料编号：{{modalPalletsData.material_code}}
        </view>
        <view class="modal-box">
          物料名称：{{modalPalletsData.material_name}}
        </view>
        <view class="modal-box">
          物料规格：{{modalPalletsData.material_spec}}
        </view>
        <view class="modal-box">
          <text>物料数量：</text>
          <input class="input" type="number" placeholder="请输入数量" bindinput="getInPalletsNumInput" value="{{inPalletsNumber}}"/>
        </view>
      </view>
    </scroll-view>
  </modal>
</view>